apiVersion: secrets-store.csi.x-k8s.io/v1
kind: SecretProviderClass
metadata:
  name: pihole
  namespace: pihole
spec:
  provider: vault
  # Vault Parameters
  # TLS Mounted on CSI pod
  parameters:
    roleName: "pihole"
    vaultAddress: "https://vault.vault:8200"
    vaultCACertPath: /vault/tls/vault.ca
    objects: |
      - objectName: "pihole-admin-password"
        secretPath: "op/vaults/VAULT_ID/items/pihole"
        secretKey: "password"
  secretObjects: # Will become the secret with the following
  - secretName: pihole-admin-password
    type: Opaque
    data:
    - objectName: pihole-admin-password
      key: password